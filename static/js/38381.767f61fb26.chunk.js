!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2e23aedb-060d-4870-9417-3bab09739eea",e._sentryDebugIdIdentifier="sentry-dbid-2e23aedb-060d-4870-9417-3bab09739eea")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.0 (2024112814)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[38381],{738381:(e,n,t)=>{t.r(n),t.d(n,{default:()=>v});var i=t(586330),r=t(514041),s=t(654266),o=t(908867),a=t(17617),d=t(490343),l=t(471169),c=t(318822),u=t(334439),f=t(875998),g=t(491180),m=t(396304),p=t(100645),y=t(547669),b=t(298254),w=function(e){return e[e.Unverified=0]="Unverified",e[e.Verifying=1]="Verifying",e[e.Verified=2]="Verified",e[e.ForceShow=3]="ForceShow",e}({}),h=t(831085);const v=function ReceiveToken(){(0,m.eX)({name:"ReceiveToken9971"});var e=(0,o.A)(),n=(0,s.lq)(),{networkId:t,accountId:v,walletId:_,token:k}=n.params,{account:x,network:T,wallet:S,vaultSettings:$,addressType:E,deriveType:j}=(0,b.b)({accountId:v,networkId:t,walletId:_}),[I,C]=(0,r.useState)(w.Unverified),[R]=(0,l.useHardwareUiStateAtom)(),{copyText:M}=(0,d.useClipboard)(),A=g.A.isQrWallet({walletId:_})||g.A.isHwWallet({walletId:_}),U=(0,r.useMemo)((function(){return!A||(I===w.ForceShow||I===w.Verified||I===w.Verifying&&R?.action===l.EHardwareUiStateAction.REQUEST_BUTTON)}),[I,R?.action,A]),V=(0,r.useMemo)((function(){if(I===w.Verifying&&R?.action===l.EHardwareUiStateAction.REQUEST_BUTTON)return!0}),[I,R?.action]),z=(0,r.useMemo)((function(){return!A||(I===w.ForceShow||I===w.Verified)}),[I,A]),B=I===w.Verifying,H=(0,r.useCallback)((0,i.A)((function*(){C(w.Verifying);try{if(!j)return;var n=yield y.A.serviceAccount.verifyHWAccountAddresses({walletId:_,networkId:t,indexedAccountId:x?.indexedAccountId,deriveType:j,confirmOnDevice:p.hz.EveryItem}),i=n?.[0]?.toLowerCase()===x?.address?.toLowerCase();f.U.transaction.receive.showReceived({walletType:S?.type,isSuccess:i,failedReason:i?"":e.formatMessage({id:u.ETranslations.feedback_address_mismatch})}),i||d.Toast.error({title:e.formatMessage({id:u.ETranslations.feedback_address_mismatch}),message:e.formatMessage({id:u.ETranslations.feedback_address_mismatch_desc})}),C(i?w.Verified:w.Unverified)}catch(e){throw C(w.Unverified),f.U.transaction.receive.showReceived({walletType:S?.type,isSuccess:!1,failedReason:e.message}),e}})),[x?.address,x?.indexedAccountId,j,e,t,S?.type,_]);(0,r.useEffect)((function(){var callback=function(){return C(w.Unverified)};return c.iL.on(c.Tu.CloseHardwareUiStateDialogManually,callback),function(){c.iL.off(c.Tu.CloseHardwareUiStateDialogManually,callback)}}),[]),(0,r.useEffect)((function(){A||f.U.transaction.receive.showReceived({walletType:S?.type,isSuccess:!0,failedReason:""})}),[A,S?.type]);var O=(0,r.useCallback)((function(){return A?I===w.Verified||I===w.ForceShow||B?(0,h.jsx)(d.Button,{mt:"$5",icon:"Copy3Outline",disabled:B,loading:B,onPress:function(){var e;M(null!=(e=x?.address)?e:"")},children:e.formatMessage({id:u.ETranslations.global_copy_address})}):(0,h.jsxs)(d.YStack,{gap:"$5",alignItems:"center",children:[(0,h.jsx)(d.Button,{mt:"$5",variant:"primary",onPress:H,children:e.formatMessage({id:u.ETranslations.global_verify_on_device})}),(0,h.jsx)(d.Button,{size:"medium",variant:"tertiary",onPress:function(){d.Dialog.confirm({icon:"ErrorOutline",tone:"warning",title:e.formatMessage({id:u.ETranslations.global_receive_address_confirmation}),description:e.formatMessage({id:u.ETranslations.global_receive_address_confirmation_desc}),onConfirmText:e.formatMessage({id:u.ETranslations.global_receive_address_confirmation_button}),onConfirm:function(){C(w.ForceShow)},confirmButtonProps:{variant:"secondary"}})},children:e.formatMessage({id:u.ETranslations.skip_verify_text})})]}):(0,h.jsx)(d.Button,{mt:"$5",icon:"Copy3Outline",onPress:function(){var e;return M(null!=(e=x?.address)?e:"")},children:e.formatMessage({id:u.ETranslations.global_copy_address})})}),[x?.address,I,M,H,e,A,B]),P=(0,r.useCallback)((function(){var n;return x&&T&&S?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(d.Stack,{mb:"$5",children:[(0,h.jsxs)(d.XStack,{gap:"$2",alignItems:"center",justifyContent:"center",children:[(0,h.jsx)(d.Heading,{size:"$headingMd",children:null!=(n=k?.symbol)?n:T.symbol}),$?.showAddressType&&E?(0,h.jsx)(d.Badge,{children:E}):null]}),(0,h.jsx)(d.SizableText,{mt:"$1",size:"$bodyMd",color:"$textSubdued",textAlign:"center",children:e.formatMessage({id:u.ETranslations.receive_send_asset_warning_message},{network:T.name})})]}),(0,h.jsxs)(d.Stack,{borderRadius:"$3",borderWidth:a.A.hairlineWidth,borderColor:"$borderSubdued",p:"$4",children:[(0,h.jsx)(d.Stack,{position:"relative",children:(0,h.jsx)(d.QRCode,{value:x.address,size:240,logo:T.isCustomNetwork?void 0:{uri:k?.logoURI||T.logoURI},logoSize:T.isCustomNetwork?void 0:40})}),z?null:(0,h.jsxs)(d.Stack,{position:"absolute",top:"$0",left:"$0",right:"$0",bottom:"$0",alignItems:"center",justifyContent:"center",children:[(0,h.jsx)(d.BlurView,{contentStyle:{borderRadius:"$3",width:"100%",height:"100%",borderCurve:"continuous"},position:"absolute",intensity:100,top:"$0",left:"$0",right:"$0",bottom:"$0"}),(0,h.jsx)(d.Empty,{icon:"EyeOffOutline",description:e.formatMessage({id:u.ETranslations.address_verify_address_instruction})})]})]}),(0,h.jsx)(d.ConfirmHighlighter,{maxWidth:"$96",highlight:V,mt:"$5",px:"$3",borderRadius:"$3",borderCurve:"continuous",children:(0,h.jsx)(d.SizableText,{textAlign:"center",size:"$bodyMd",style:{wordBreak:"break-all"},children:U?x.address:g.A.shortenAddress({address:x.address})})}),U&&I===w.ForceShow?(0,h.jsxs)(d.XStack,{mt:"$1",justifyContent:"center",alignItems:"center",children:[(0,h.jsx)(d.Icon,{name:"InfoCircleOutline",size:"$4",color:"$iconCritical"}),(0,h.jsx)(d.SizableText,{size:"$bodyMd",color:"$textCritical",pl:"$1.5",children:e.formatMessage({id:u.ETranslations.receive_address_unconfimed_alert_message})})]}):null,O()]}):null}),[x,T,S,$?.showAddressType,E,e,k?.logoURI,z,V,U,I,O,k?.symbol]);return(0,h.jsxs)(d.Page,{"data-sentry-element":"Page","data-sentry-component":"ReceiveToken","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/ReceiveToken.tsx",children:[(0,h.jsx)(d.Page.Header,{title:e.formatMessage({id:u.ETranslations.global_receive}),"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/ReceiveToken.tsx"}),(0,h.jsx)(d.Page.Body,{flex:1,justifyContent:"center",alignItems:"center",px:"$5",pb:"$5","data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Receive/pages/ReceiveToken.tsx",children:P()})]})}}}]);
//# sourceMappingURL=38381.767f61fb26.chunk.js.map